<h1 class="text-2xl font-bold text-[#003366] mb-6">Server Übersicht</h1>

<!-- Suchfeld -->
<div class="mb-6">
  <%= form_with url: search_servers_path, method: :get, local: true do %>
    <div class="flex space-x-2">
      <%= text_field_tag :server_query, params[:server_query],
                         placeholder: "🔍 Server suchen",
                         class: "p-2 border rounded w-64" %>
      <%= submit_tag "Suchen",
                     class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
    </div>
  <% end %>
</div>
<div class="mt-6">
  <%= link_to "➕ Neuen Server anlegen", new_server_path,
              class: "block bg-white border border-gray-300 rounded-xl shadow-md text-[#003366] font-semibold py-2 px-4 text-center hover:bg-gray-50 transition" %>
</div>

<% @servers.each do |server| %>
  <div class="bg-white border border-gray-300 rounded-xl shadow-md hover:shadow-lg transition p-5 mb-4">
    <h2 class="text-lg font-semibold text-[#003366] mb-2"><%= server.name %></h2>

    <p class="mb-2">
      <% case server.status %>
      <% when "aktiv" %>
        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Aktiv</span>
      <% when "inaktiv" %>
        <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">Inaktiv</span>
      <% end %>
    </p>

    <p class="text-gray-600 mb-4">
      <%= server.gateways.count %> Gateways zugewiesen
    </p>

    <div class="flex space-x-3">
      <%= link_to "👁 Anzeigen", server_path(server), class: "text-blue-600 hover:underline text-sm" %>
      <%= link_to "✏️ Bearbeiten", edit_server_path(server), class: "text-yellow-600 hover:underline text-sm" %>
      <%= link_to "🗑 Löschen", server_path(server),
                  data: { turbo_method: :delete, turbo_confirm: "Bist du sicher?" },
                  class: "text-red-600 hover:underline text-sm" %>
    </div>
  </div>
<% end %>

