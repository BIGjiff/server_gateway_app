<h1 class="text-2xl font-bold text-[#003366] mb-6">Gateway Übersicht</h1>


<!-- Suchfeld -->
<div class="mb-6">
  <%= form_with url: search_gateways_path, method: :get, local: true do %>
    <div class="flex space-x-2">
      <%= text_field_tag :gateway_query, params[:gateway_query],
                         placeholder: "🔍 Gateway suchen",
                         class: "p-2 border rounded w-64" %>
      <%= submit_tag "Suchen",
                     class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
    </div>
  <% end %>
</div>
<div class="mt-6">
  <%= link_to "➕ Neues Gateway anlegen", new_gateway_path,
              class: "px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition" %>
</div>


<div class="py-1 flex-wrap gap-3 mb-6">
  <%= link_to "Alle", gateways_path, class: "px-3 py-1 bg-gray-100 text-gray-800 rounded hover:bg-gray-200" %>
  <%= link_to "Aktive", gateways_path(filter: "active"), class: "px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200" %>
  <%= link_to "Inaktive", gateways_path(filter: "inactive"), class: "px-3 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200" %>
  <%= link_to "Zugewiesen", gateways_path(filter: "assigned"), class: "px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200" %>
  <%= link_to "Nicht zugewiesen", gateways_path(filter: "unassigned"), class: "px-3 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200" %>
</div>

<div class="bg-white shadow rounded-lg p-4 mb-4">
  <h2 class="text-lg font-semibold mb-2">Liste</h2>
  <table class="min-w-full text-sm text-left text-gray-600">
    <thead class="bg-gray-50 text-gray-700 font-semibold">
    <tr>
      <th class="px-4 py-2">Gateway</th>
      <th class="px-4 py-2 text-center">Status</th>
      <th class="px-4 py-2 text-center">Server</th>
      <th class="px-4 py-2 text-right">Aktionen</th>
    </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
    <% @gateways.each do |gateway| %>
      <tr class="hover:bg-gray-50 transition">
        <td class="px-4 py-2 font-medium"><%= gateway.serial %></td>
        <td class="px-4 py-2 text-center">
          <% if gateway.active %>
            <span class="text-green-600 font-semibold">Aktiv</span>
          <% else %>
            <span class="text-red-500 font-semibold">Inaktiv</span>
          <% end %>
        </td>
        <td class="px-4 py-2 text-center">
          <%= gateway.server&.name.presence || "—" %>
        </td>
        <td class="px-4 py-2 text-right">
          <%= link_to "Details", gateway_path(gateway),
                      class: "px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition" %>
          <%= link_to "Löschen", gateway_path(gateway),
                      data: { turbo_method: :delete, turbo_confirm: "Wirklich löschen?" },
                      class: "px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-red-700 transition" %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
